-- Tower of Hell Script with Key System
local correctKey = "ToH2025" -- Change this to your desired key

-- Services
local CoreGui = game:GetService("CoreGui")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

-- Key Authentication
local keyAuthentication = {
    passed = false,
    attempts = 0,
    maxAttempts = 5,
    locked = false
}

-- Kick function
local function kickPlayer(reason)
    if LocalPlayer and LocalPlayer.Kick then
        LocalPlayer:Kick("ToH Helper: " .. reason)
    else
        game:Shutdown()
    end
end

-- Key GUI
local function createKeyGUI()
    local keyGui = Instance.new("ScreenGui")
    keyGui.Name = "ToH_KeySystem"
    keyGui.ResetOnSpawn = false
    keyGui.Parent = CoreGui

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0, 350, 0, 250)
    frame.Position = UDim2.new(0.5, -175, 0.5, -125)
    frame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
    frame.BorderSizePixel = 0
    frame.Parent = keyGui

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 12)
    corner.Parent = frame

    -- Title
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, 0, 0, 50)
    title.Position = UDim2.new(0, 0, 0, 10)
    title.BackgroundTransparency = 1
    title.Text = "üîë Tower of Hell Access"
    title.TextColor3 = Color3.fromRGB(220, 220, 220)
    title.Font = Enum.Font.GothamBold
    title.TextSize = 22
    title.Parent = frame

    -- Discord button
    local discordButton = Instance.new("TextButton")
    discordButton.Size = UDim2.new(0.8, 0, 0, 35)
    discordButton.Position = UDim2.new(0.1, 0, 0.2, 0)
    discordButton.Text = "üì¢ Join Discord for Key"
    discordButton.Font = Enum.Font.GothamBold
    discordButton.TextSize = 12
    discordButton.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
    discordButton.TextColor3 = Color3.new(1, 1, 1)
    discordButton.Parent = frame
    
    local discordCorner = Instance.new("UICorner")
    discordCorner.CornerRadius = UDim.new(0, 6)
    discordCorner.Parent = discordButton

    local warningLabel = Instance.new("TextLabel")
    warningLabel.Size = UDim2.new(0.9, 0, 0, 25)
    warningLabel.Position = UDim2.new(0.05, 0, 0.4, 0)
    warningLabel.BackgroundTransparency = 1
    warningLabel.Text = "‚ö†Ô∏è 5 wrong attempts = auto-kick"
    warningLabel.TextColor3 = Color3.fromRGB(255, 165, 0)
    warningLabel.TextSize = 11
    warningLabel.Font = Enum.Font.Gotham
    warningLabel.Parent = frame

    local textbox = Instance.new("TextBox")
    textbox.Size = UDim2.new(0.9, 0, 0, 40)
    textbox.Position = UDim2.new(0.05, 0, 0.55, 0)
    textbox.PlaceholderText = "Enter access key..."
    textbox.Text = ""
    textbox.Font = Enum.Font.Gotham
    textbox.TextSize = 16
    textbox.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
    textbox.TextColor3 = Color3.new(1, 1, 1)
    textbox.ClearTextOnFocus = false
    
    local textCorner = Instance.new("UICorner")
    textCorner.CornerRadius = UDim.new(0, 6)
    textCorner.Parent = textbox
    textbox.Parent = frame

    local statusLabel = Instance.new("TextLabel")
    statusLabel.Size = UDim2.new(1, 0, 0, 25)
    statusLabel.Position = UDim2.new(0, 0, 0.7, 0)
    statusLabel.BackgroundTransparency = 1
    statusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
    statusLabel.Text = ""
    statusLabel.TextSize = 12
    statusLabel.Font = Enum.Font.Gotham
    statusLabel.Parent = frame

    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0.7, 0, 0, 35)
    button.Position = UDim2.new(0.15, 0, 0.82, 0)
    button.Text = "üîë Submit Key"
    button.Font = Enum.Font.GothamBold
    button.TextSize = 14
    button.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
    button.TextColor3 = Color3.new(1, 1, 1)
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 6)
    buttonCorner.Parent = button
    button.Parent = frame

    -- Discord button functionality
    discordButton.MouseButton1Click:Connect(function()
        pcall(function()
            setclipboard("https://discord.gg/9BDbbzWQKV")
        end)
        
        discordButton.Text = "‚úÖ Link Copied!"
        discordButton.BackgroundColor3 = Color3.fromRGB(50, 200, 50)
        
        task.wait(1.5)
        discordButton.Text = "üì¢ Join Discord for Key"
        discordButton.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
    end)

    -- Submit handler
    local function handleSubmit()
        if keyAuthentication.locked then
            statusLabel.Text = "üîí System locked - kicking..."
            return
        end

        local inputKey = textbox.Text
        if inputKey == correctKey then
            keyAuthentication.passed = true
            statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
            statusLabel.Text = "‚úÖ Access granted!"
            button.Text = "üéâ Loading..."
            button.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
            
            -- Smooth fade out
            local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
            
            TweenService:Create(frame, tweenInfo, {BackgroundTransparency = 1}):Play()
            TweenService:Create(textbox, tweenInfo, {BackgroundTransparency = 1, TextTransparency = 1}):Play()
            TweenService:Create(button, tweenInfo, {BackgroundTransparency = 1, TextTransparency = 1}):Play()
            TweenService:Create(title, tweenInfo, {TextTransparency = 1}):Play()
            TweenService:Create(statusLabel, tweenInfo, {TextTransparency = 1}):Play()
            TweenService:Create(warningLabel, tweenInfo, {TextTransparency = 1}):Play()
            TweenService:Create(discordButton, tweenInfo, {BackgroundTransparency = 1, TextTransparency = 1}):Play()
            
            task.wait(0.6)
            keyGui:Destroy()
        else
            keyAuthentication.attempts = keyAuthentication.attempts + 1
            statusLabel.Text = string.format("‚ùå Invalid key! (%d/%d)", keyAuthentication.attempts, keyAuthentication.maxAttempts)
            textbox.Text = ""
            
            if keyAuthentication.attempts >= 3 then
                button.BackgroundColor3 = Color3.fromRGB(255, 165, 0)
            end
            
            if keyAuthentication.attempts >= keyAuthentication.maxAttempts then
                keyAuthentication.locked = true
                statusLabel.Text = "üö´ Maximum attempts reached!"
                button.Text = "üî¥ Kicking..."
                button.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
                
                task.wait(2)
                kickPlayer("Too many failed key attempts")
            end
        end
    end

    button.MouseButton1Click:Connect(handleSubmit)
    textbox.FocusLost:Connect(function(enterPressed)
        if enterPressed then handleSubmit() end
    end)

    textbox:CaptureFocus()
    return keyGui
end

-- Wait for key authentication
local keyGui = createKeyGUI()
local startTime = tick()

repeat
    if keyAuthentication.locked then break end
    task.wait(0.1)
until keyAuthentication.passed or (tick() - startTime) > 300

if not keyAuthentication.passed then
    if keyGui then keyGui:Destroy() end
    if not keyAuthentication.locked then
        kickPlayer("Key authentication timeout")
    end
    return
end

-- ===== TOWER OF HELL MAIN SCRIPT =====
local RunService = game:GetService("RunService")

-- Create GUI
local ToHGui = Instance.new("ScreenGui")
ToHGui.Name = "ToHHelper"
ToHGui.ResetOnSpawn = false
ToHGui.Parent = CoreGui

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 300, 0, 400)
mainFrame.Position = UDim2.new(0, 10, 0, 10)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = ToHGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = mainFrame

-- Title
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 40)
title.Position = UDim2.new(0, 0, 0, 10)
title.BackgroundTransparency = 1
title.Text = "üèÉ‚Äç‚ôÇÔ∏è Tower of Hell Helper"
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.GothamBold
title.TextSize = 18
title.Parent = mainFrame

-- Scrolling frame
local scrollFrame = Instance.new("ScrollingFrame")
scrollFrame.Size = UDim2.new(1, -20, 1, -60)
scrollFrame.Position = UDim2.new(0, 10, 0, 50)
scrollFrame.BackgroundTransparency = 1
scrollFrame.ScrollBarThickness = 6
scrollFrame.CanvasSize = UDim2.new(0, 0, 0, 600)
scrollFrame.Parent = mainFrame

local uiListLayout = Instance.new("UIListLayout")
uiListLayout.Padding = UDim.new(0, 8)
uiListLayout.Parent = scrollFrame

-- Practice features (safe to use)
local function createButton(text, description, callback, color)
    local buttonFrame = Instance.new("Frame")
    buttonFrame.Size = UDim2.new(1, 0, 0, 70)
    buttonFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
    buttonFrame.BorderSizePixel = 0
    buttonFrame.Parent = scrollFrame
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 6)
    buttonCorner.Parent = buttonFrame
    
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, -10, 0, 40)
    button.Position = UDim2.new(0, 5, 0, 5)
    button.BackgroundColor3 = color or Color3.fromRGB(0, 120, 255)
    button.TextColor3 = Color3.new(1, 1, 1)
    button.Text = text
    button.Font = Enum.Font.GothamBold
    button.TextSize = 14
    button.Parent = buttonFrame
    
    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 6)
    btnCorner.Parent = button
    
    local descLabel = Instance.new("TextLabel")
    descLabel.Size = UDim2.new(1, -10, 0, 20)
    descLabel.Position = UDim2.new(0, 5, 0, 45)
    descLabel.BackgroundTransparency = 1
    descLabel.Text = description
    descLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
    descLabel.Font = Enum.Font.Gotham
    descLabel.TextSize = 11
    descLabel.TextXAlignment = Enum.TextXAlignment.Left
    descLabel.Parent = buttonFrame
    
    button.MouseButton1Click:Connect(callback)
    
    return buttonFrame
end

-- Safe features for practice
local function practiceMode()
    -- Reset character to practice
    if LocalPlayer.Character then
        LocalPlayer.Character:BreakJoints()
    end
end

local function toggleBHop()
    _G.bhopEnabled = not _G.bhopEnabled
    
    if _G.bhopEnabled then
        -- Simple auto-jump when moving (common in many games)
        local connection
        connection = RunService.Heartbeat:Connect(function()
            if not _G.bhopEnabled then
                connection:Disconnect()
                return
            end
            
            local character = LocalPlayer.Character
            if character then
                local humanoid = character:FindFirstChildOfClass("Humanoid")
                local rootPart = character:FindFirstChild("HumanoidRootPart")
                
                if humanoid and rootPart and humanoid.MoveDirection.Magnitude > 0 then
                    if humanoid.FloorMaterial ~= Enum.Material.Air then
                        humanoid.Jump = true
                    end
                end
            end
        end)
    end
end

local function speedBoost()
    local humanoid = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid.WalkSpeed = 25 -- Slight increase for practice
    end
end

local function resetSpeed()
    local humanoid = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid.WalkSpeed = 16
    end
end

local function highJump()
    local humanoid = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid.JumpPower = 75 -- Moderate increase
    end
end

local function resetJump()
    local humanoid = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid.JumpPower = 50
    end
end

local function checkpointTeleport()
    -- Teleport to latest checkpoint (if detectable in game)
    local checkpoints = workspace:FindFirstChild("Checkpoints")
    if checkpoints then
        local latestCheckpoint
        for _, checkpoint in pairs(checkpoints:GetChildren()) do
            if checkpoint:IsA("Part") then
                latestCheckpoint = checkpoint
            end
        end
        
        if latestCheckpoint and LocalPlayer.Character then
            local rootPart = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
            if rootPart then
                rootPart.CFrame = latestCheckpoint.CFrame + Vector3.new(0, 5, 0)
            end
        end
    end
end

local function practiceNoclip()
    _G.noclip = not _G.noclip
    
    if _G.noclip then
        local connection
        connection = RunService.Stepped:Connect(function()
            if not _G.noclip or not LocalPlayer.Character then
                connection:Disconnect()
                return
            end
            
            for _, part in pairs(LocalPlayer.Character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = false
                end
            end
        end)
    end
end

local function cameraZoom()
    local camera = workspace.CurrentCamera
    if camera then
        camera.FieldOfView = 80 -- Wider FOV for better visibility
    end
end

local function resetCamera()
    local camera = workspace.CurrentCamera
    if camera then
        camera.FieldOfView = 70
    end
end

local function antiAfk()
    _G.antiAfkEnabled = not _G.antiAfkEnabled
    
    if _G.antiAfkEnabled then
        local connection
        connection = RunService.Heartbeat:Connect(function()
            if not _G.antiAfkEnabled then
                connection:Disconnect()
                return
            end
            -- Simulate activity
            LocalPlayer:GetMouse().Move()
        end)
    end
end

-- Create buttons
createButton("üîÑ PRACTICE MODE", "Reset to practice the tower", practiceMode, Color3.fromRGB(255, 100, 100))
createButton("üêá BUNNY HOP", "Auto-jump while moving", toggleBHop, Color3.fromRGB(100, 255, 100))
createButton("‚ö° SPEED BOOST", "Slightly increased speed", speedBoost, Color3.fromRGB(255, 150, 50))
createButton("üê¢ RESET SPEED", "Back to normal speed", resetSpeed, Color3.fromRGB(200, 200, 100))
createButton("ü¶ò HIGH JUMP", "Increased jump height", highJump, Color3.fromRGB(255, 200, 100))
createButton("üìè RESET JUMP", "Normal jump height", resetJump, Color3.fromRGB(200, 150, 100))
createButton("üìå CHECKPOINT TP", "Teleport to checkpoint", checkpointTeleport, Color3.fromRGB(100, 200, 255))
createButton("üëª PRACTICE NO-CLIP", "Walk through obstacles", practiceNoclip, Color3.fromRGB(150, 150, 255))
createButton("üì∑ WIDE VIEW", "Wider camera FOV", cameraZoom, Color3.fromRGB(200, 100, 255))
createButton("üì∑ RESET VIEW", "Normal camera FOV", resetCamera, Color3.fromRGB(150, 100, 200))
createButton("‚è∞ ANTI-AFK", "Prevent being kicked for AFK", antiAfk, Color3.fromRGB(255, 255, 100))

-- Discord button in main GUI
createButton("üì¢ JOIN DISCORD", "Get support and updates", function()
    pcall(function()
        setclipboard("https://discord.gg/9BDbbzWQKV")
    end)
    
    local notif = Instance.new("TextLabel")
    notif.Size = UDim2.new(0, 250, 0, 40)
    notif.Position = UDim2.new(0.5, -125, 0.9, 0)
    notif.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
    notif.Text = "‚úÖ Discord link copied!"
    notif.TextColor3 = Color3.new(1, 1, 1)
    notif.Font = Enum.Font.GothamBold
    notif.TextSize = 14
    notif.Parent = ToHGui
    
    local notifCorner = Instance.new("UICorner")
    notifCorner.CornerRadius = UDim.new(0, 8)
    notifCorner.Parent = notif
    
    task.wait(3)
    notif:Destroy()
end, Color3.fromRGB(88, 101, 242))

-- Close button
createButton("‚ùå CLOSE", "Close the helper", function()
    ToHGui:Destroy()
    _G.bhopEnabled = false
    _G.noclip = false
    _G.antiAfkEnabled = false
end, Color3.fromRGB(100, 100, 100))

-- Auto-resize scroll frame
uiListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
    scrollFrame.CanvasSize = UDim2.new(0, 0, 0, uiListLayout.AbsoluteContentSize.Y + 20)
end)

-- Make draggable
local dragging = false
local dragInput, dragStart, startPos

mainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

mainFrame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        local delta = input.Position - dragStart
        mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- Character auto-setup
LocalPlayer.CharacterAdded:Connect(function(character)
    task.wait(1)
    -- Auto-set moderate speed for practice
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid.WalkSpeed = 18
        humanoid.JumpPower = 55
    end
end)

-- Success notification
local notif = Instance.new("TextLabel")
notif.Size = UDim2.new(0, 280, 0, 40)
notif.Position = UDim2.new(0.5, -140, 0.1, 0)
notif.BackgroundColor3 = Color3.fromRGB(50, 255, 50)
notif.Text = "‚úÖ Tower of Hell Helper Loaded!"
notif.TextColor3 = Color3.new(1, 1, 1)
notif.Font = Enum.Font.GothamBold
notif.TextSize = 14
notif.Parent = ToHGui

local notifCorner = Instance.new("UICorner")
notifCorner.CornerRadius = UDim.new(0, 8)
notifCorner.Parent = notif

task.wait(3)
notif:Destroy()

print("Tower of Hell Helper loaded successfully!")
