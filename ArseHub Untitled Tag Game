-- Untitled Tag Game Hub
local correctKey = "Tag2025" -- Change this key

-- Services
local CoreGui = game:GetService("CoreGui")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

-- Key Authentication
local keyAuthentication = {
    passed = false,
    attempts = 0,
    maxAttempts = 5,
    locked = false
}

-- Kick function
local function kickPlayer(reason)
    if LocalPlayer and LocalPlayer.Kick then
        LocalPlayer:Kick("Tag Hub: " .. reason)
    else
        game:Shutdown()
    end
end

-- Key GUI
local function createKeyGUI()
    local keyGui = Instance.new("ScreenGui")
    keyGui.Name = "TagHub_KeySystem"
    keyGui.ResetOnSpawn = false
    keyGui.Parent = CoreGui

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0, 400, 0, 300)
    frame.Position = UDim2.new(0.5, -200, 0.5, -150)
    frame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
    frame.BorderSizePixel = 0
    frame.Parent = keyGui

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 12)
    corner.Parent = frame

    -- Title
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, 0, 0, 50)
    title.Position = UDim2.new(0, 0, 0, 10)
    title.BackgroundTransparency = 1
    title.Text = "üè∑Ô∏è Untitled Tag Game Hub"
    title.TextColor3 = Color3.fromRGB(220, 220, 220)
    title.Font = Enum.Font.GothamBold
    title.TextSize = 24
    title.Parent = frame

    -- Discord button
    local discordButton = Instance.new("TextButton")
    discordButton.Size = UDim2.new(0.8, 0, 0, 40)
    discordButton.Position = UDim2.new(0.1, 0, 0.2, 0)
    discordButton.Text = "üì¢ Join Discord for Key"
    discordButton.Font = Enum.Font.GothamBold
    discordButton.TextSize = 14
    discordButton.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
    discordButton.TextColor3 = Color3.new(1, 1, 1)
    discordButton.Parent = frame
    
    local discordCorner = Instance.new("UICorner")
    discordCorner.CornerRadius = UDim.new(0, 8)
    discordCorner.Parent = discordButton

    local discordDesc = Instance.new("TextLabel")
    discordDesc.Size = UDim2.new(0.8, 0, 0, 30)
    discordDesc.Position = UDim2.new(0.1, 0, 0.3, 0)
    discordDesc.BackgroundTransparency = 1
    discordDesc.Text = "Link: discord.gg/9BDbbzWQKV"
    discordDesc.TextColor3 = Color3.fromRGB(180, 180, 180)
    discordDesc.TextSize = 11
    discordDesc.Font = Enum.Font.Gotham
    discordDesc.Parent = frame

    local warningLabel = Instance.new("TextLabel")
    warningLabel.Size = UDim2.new(0.9, 0, 0, 30)
    warningLabel.Position = UDim2.new(0.05, 0, 0.45, 0)
    warningLabel.BackgroundTransparency = 1
    warningLabel.Text = "‚ö†Ô∏è 5 wrong attempts = auto-kick"
    warningLabel.TextColor3 = Color3.fromRGB(255, 165, 0)
    warningLabel.TextSize = 12
    warningLabel.Font = Enum.Font.Gotham
    warningLabel.Parent = frame

    local textbox = Instance.new("TextBox")
    textbox.Size = UDim2.new(0.9, 0, 0, 45)
    textbox.Position = UDim2.new(0.05, 0, 0.6, 0)
    textbox.PlaceholderText = "Enter access key..."
    textbox.Text = ""
    textbox.Font = Enum.Font.Gotham
    textbox.TextSize = 16
    textbox.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
    textbox.TextColor3 = Color3.new(1, 1, 1)
    textbox.ClearTextOnFocus = false
    
    local textCorner = Instance.new("UICorner")
    textCorner.CornerRadius = UDim.new(0, 8)
    textCorner.Parent = textbox
    textbox.Parent = frame

    local statusLabel = Instance.new("TextLabel")
    statusLabel.Size = UDim2.new(1, 0, 0, 25)
    statusLabel.Position = UDim2.new(0, 0, 0.75, 0)
    statusLabel.BackgroundTransparency = 1
    statusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
    statusLabel.Text = ""
    statusLabel.TextSize = 14
    statusLabel.Font = Enum.Font.Gotham
    statusLabel.Parent = frame

    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0.7, 0, 0, 40)
    button.Position = UDim2.new(0.15, 0, 0.85, 0)
    button.Text = "üîë Submit Key"
    button.Font = Enum.Font.GothamBold
    button.TextSize = 16
    button.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
    button.TextColor3 = Color3.new(1, 1, 1)
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 8)
    buttonCorner.Parent = button
    button.Parent = frame

    -- Discord button functionality
    discordButton.MouseButton1Click:Connect(function()
        pcall(function()
            setclipboard("https://discord.gg/9BDbbzWQKV")
        end)
        
        discordButton.Text = "‚úÖ Link Copied!"
        discordButton.BackgroundColor3 = Color3.fromRGB(50, 200, 50)
        
        task.wait(1.5)
        discordButton.Text = "üì¢ Join Discord for Key"
        discordButton.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
    end)

    -- Submit handler
    local function handleSubmit()
        if keyAuthentication.locked then
            statusLabel.Text = "üîí System locked - kicking..."
            return
        end

        local inputKey = textbox.Text
        if inputKey == correctKey then
            keyAuthentication.passed = true
            statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
            statusLabel.Text = "‚úÖ Access granted!"
            button.Text = "üéâ Loading Tag Hub..."
            button.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
            
            -- Smooth fade out
            local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
            local elements = {frame, textbox, button, title, statusLabel, warningLabel, discordButton, discordDesc}
            
            for _, element in pairs(elements) do
                if element:IsA("Frame") then
                    TweenService:Create(element, tweenInfo, {BackgroundTransparency = 1}):Play()
                else
                    TweenService:Create(element, tweenInfo, {TextTransparency = 1}):Play()
                    if element:IsA("TextButton") then
                        TweenService:Create(element, tweenInfo, {BackgroundTransparency = 1}):Play()
                    end
                end
            end
            
            task.wait(0.6)
            keyGui:Destroy()
        else
            keyAuthentication.attempts = keyAuthentication.attempts + 1
            statusLabel.Text = string.format("‚ùå Invalid key! (%d/%d)", keyAuthentication.attempts, keyAuthentication.maxAttempts)
            textbox.Text = ""
            
            if keyAuthentication.attempts >= 3 then
                button.BackgroundColor3 = Color3.fromRGB(255, 165, 0)
            end
            
            if keyAuthentication.attempts >= keyAuthentication.maxAttempts then
                keyAuthentication.locked = true
                statusLabel.Text = "üö´ Maximum attempts reached!"
                button.Text = "üî¥ Kicking..."
                button.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
                
                task.wait(2)
                kickPlayer("Too many failed key attempts")
            end
        end
    end

    button.MouseButton1Click:Connect(handleSubmit)
    textbox.FocusLost:Connect(function(enterPressed)
        if enterPressed then handleSubmit() end
    end)

    textbox:CaptureFocus()
    return keyGui
end

-- Wait for key authentication
local keyGui = createKeyGUI()
local startTime = tick()

repeat
    if keyAuthentication.locked then break end
    task.wait(0.1)
until keyAuthentication.passed or (tick() - startTime) > 300

if not keyAuthentication.passed then
    if keyGui then keyGui:Destroy() end
    if not keyAuthentication.locked then
        kickPlayer("Key authentication timeout")
    end
    return
end

-- ===== TAG GAME HUB MAIN GUI =====
local tagHubGui = Instance.new("ScreenGui")
tagHubGui.Name = "TagHub"
tagHubGui.ResetOnSpawn = false
tagHubGui.Parent = CoreGui

-- Main frame
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 450, 0, 600)
mainFrame.Position = UDim2.new(0.02, 0, 0.02, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = tagHubGui

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 12)
mainCorner.Parent = mainFrame

-- Title
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 60)
title.Position = UDim2.new(0, 0, 0, 10)
title.BackgroundTransparency = 1
title.Text = "üè∑Ô∏è Untitled Tag Game Hub"
title.TextColor3 = Color3.fromRGB(220, 220, 220)
title.Font = Enum.Font.GothamBold
title.TextSize = 24
title.Parent = mainFrame

-- Divider
local divider = Instance.new("Frame")
divider.Size = UDim2.new(1, -40, 0, 2)
divider.Position = UDim2.new(0, 20, 0, 70)
divider.BackgroundColor3 = Color3.fromRGB(70, 70, 90)
divider.BorderSizePixel = 0
divider.Parent = mainFrame
local dividerCorner = Instance.new("UICorner")
dividerCorner.CornerRadius = UDim.new(0, 2)
dividerCorner.Parent = divider

-- Scrolling frame
local scrollFrame = Instance.new("ScrollingFrame")
scrollFrame.Size = UDim2.new(1, -20, 1, -100)
scrollFrame.Position = UDim2.new(0, 10, 0, 80)
scrollFrame.BackgroundTransparency = 1
scrollFrame.BorderSizePixel = 0
scrollFrame.ScrollBarThickness = 6
scrollFrame.CanvasSize = UDim2.new(0, 0, 0, 800)
scrollFrame.Parent = mainFrame

-- UIListLayout
local uiListLayout = Instance.new("UIListLayout")
uiListLayout.Padding = UDim.new(0, 10)
uiListLayout.Parent = scrollFrame

-- Tag Game Functions
local function getItPlayer()
    for _, player in pairs(Players:GetPlayers()) do
        pcall(function()
            local character = player.Character
            if character then
                local humanoid = character:FindFirstChildOfClass("Humanoid")
                if humanoid then
                    -- Check for "It" status (common indicators in tag games)
                    if humanoid:FindFirstChild("It") or character:FindFirstChild("It") then
                        return player
                    end
                    -- Alternative check: look for glowing effects or different materials
                    for _, part in pairs(character:GetChildren()) do
                        if part:IsA("BasePart") then
                            if part.Material == Enum.Material.Neon or part.BrickColor == BrickColor.new("Bright orange") then
                                return player
                            end
                        end
                    end
                end
            end
        end)
    end
    return nil
end

local function becomeIt()
    local itPlayer = getItPlayer()
    if itPlayer and itPlayer.Character and LocalPlayer.Character then
        pcall(function()
            -- Teleport to it player to get tagged
            local itHRP = itPlayer.Character:FindFirstChild("HumanoidRootPart")
            local localHRP = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
            if itHRP and localHRP then
                localHRP.CFrame = itHRP.CFrame
            end
        end)
    end
end

local function avoidIt()
    local itPlayer = getItPlayer()
    if itPlayer and itPlayer ~= LocalPlayer and LocalPlayer.Character then
        pcall(function()
            local itHRP = itPlayer.Character:FindFirstChild("HumanoidRootPart")
            local localHRP = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
            if itHRP and localHRP then
                -- Move away from it player
                local direction = (localHRP.Position - itHRP.Position).Unit
                localHRP.CFrame = localHRP.CFrame + (direction * 50)
            end
        end)
    end
end

local function teleportAllToIt()
    local itPlayer = getItPlayer()
    if itPlayer and itPlayer.Character then
        for _, player in pairs(Players:GetPlayers()) do
            if player ~= itPlayer and player.Character then
                pcall(function()
                    local itHRP = itPlayer.Character:FindFirstChild("HumanoidRootPart")
                    local playerHRP = player.Character:FindFirstChild("HumanoidRootPart")
                    if itHRP and playerHRP then
                        playerHRP.CFrame = itHRP.CFrame * CFrame.new(0, 0, -10)
                    end
                end)
            end
        end
    end
end

local function teleportAllToYou()
    if LocalPlayer.Character then
        local yourHRP = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
        if yourHRP then
            for _, player in pairs(Players:GetPlayers()) do
                if player ~= LocalPlayer and player.Character then
                    pcall(function()
                        local playerHRP = player.Character:FindFirstChild("HumanoidRootPart")
                        if playerHRP then
                            playerHRP.CFrame = yourHRP.CFrame * CFrame.new(0, 0, -10)
                        end
                    end)
                end
            end
        end
    end
end

local function freezeAllPlayers()
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            pcall(function()
                local character = player.Character
                if character then
                    local humanoid = character:FindFirstChildOfClass("Humanoid")
                    if humanoid then
                        humanoid.PlatformStand = true
                    end
                end
            end)
        end
    end
end

local function unfreezeAllPlayers()
    for _, player in pairs(Players:GetPlayers()) do
        pcall(function()
            local character = player.Character
            if character then
                local humanoid = character:FindFirstChildOfClass("Humanoid")
                if humanoid then
                    humanoid.PlatformStand = false
                end
            end
        end)
    end
end

local function speedBoost()
    local humanoid = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid.WalkSpeed = 50
    end
end

local function resetSpeed()
    local humanoid = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid.WalkSpeed = 16
    end
end

local function highJump()
    local humanoid = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid.JumpPower = 100
    end
end

local function resetJump()
    local humanoid = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid.JumpPower = 50
    end
end

local function noClip()
    if LocalPlayer.Character then
        for _, part in pairs(LocalPlayer.Character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = false
            end
        end
    end
end

local function reClip()
    if LocalPlayer.Character then
        for _, part in pairs(LocalPlayer.Character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = true
            end
        end
    end
end

local function copyItPlayerName()
    local itPlayer = getItPlayer()
    if itPlayer then
        pcall(function()
            setclipboard(tostring(itPlayer.Name))
        end)
        return itPlayer.Name
    end
    return nil
end

local function autoAvoidIt()
    _G.autoAvoid = not _G.autoAvoid
    
    while _G.autoAvoid do
        local itPlayer = getItPlayer()
        if itPlayer and itPlayer ~= LocalPlayer and LocalPlayer.Character then
            pcall(function()
                local itHRP = itPlayer.Character:FindFirstChild("HumanoidRootPart")
                local localHRP = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                if itHRP and localHRP then
                    local distance = (itHRP.Position - localHRP.Position).Magnitude
                    if distance < 20 then -- If it player is close
                        local direction = (localHRP.Position - itHRP.Position).Unit
                        localHRP.CFrame = localHRP.CFrame + (direction * 30)
                    end
                end
            end)
        end
        task.wait(0.5)
    end
end

-- Create button function
local function createButton(text, description, callback, color)
    local buttonFrame = Instance.new("Frame")
    buttonFrame.Size = UDim2.new(1, -10, 0, 80)
    buttonFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
    buttonFrame.BorderSizePixel = 0
    buttonFrame.Parent = scrollFrame
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 8)
    buttonCorner.Parent = buttonFrame
    
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, 0, 0, 50)
    button.Position = UDim2.new(0, 0, 0, 0)
    button.BackgroundColor3 = color or Color3.fromRGB(0, 150, 255)
    button.TextColor3 = Color3.new(1, 1, 1)
    button.Text = text
    button.Font = Enum.Font.GothamBold
    button.TextSize = 16
    button.BorderSizePixel = 0
    button.Parent = buttonFrame
    
    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 8)
    btnCorner.Parent = button
    
    local descLabel = Instance.new("TextLabel")
    descLabel.Size = UDim2.new(1, -10, 0, 20)
    descLabel.Position = UDim2.new(0, 5, 0, 55)
    descLabel.BackgroundTransparency = 1
    descLabel.Text = description
    descLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
    descLabel.Font = Enum.Font.Gotham
    descLabel.TextSize = 12
    descLabel.TextXAlignment = Enum.TextXAlignment.Left
    descLabel.Parent = buttonFrame
    
    button.MouseButton1Click:Connect(callback)
    
    return buttonFrame
end

-- Create all Tag Game buttons
createButton("üéØ BECOME IT", "Teleport to it player to get tagged", becomeIt, Color3.fromRGB(255, 100, 100))
createButton("üèÉ AVOID IT", "Teleport away from it player", avoidIt, Color3.fromRGB(100, 200, 255))
createButton("üîÅ AUTO AVOID IT", "Automatically avoid it player", autoAvoidIt, Color3.fromRGB(255, 150, 50))
createButton("üë• TELEPORT ALL TO IT", "Bring everyone to it player", teleportAllToIt, Color3.fromRGB(255, 100, 200))
createButton("üìç TELEPORT ALL TO YOU", "Bring everyone to your position", teleportAllToYou, Color3.fromRGB(200, 100, 255))
createButton("‚ùÑÔ∏è FREEZE ALL PLAYERS", "Freeze everyone except you", freezeAllPlayers, Color3.fromRGB(100, 200, 255))
createButton("üî• UNFREEZE ALL PLAYERS", "Unfreeze all players", unfreezeAllPlayers, Color3.fromRGB(50, 255, 150))
createButton("‚ö° SPEED BOOST", "Increase your movement speed", speedBoost, Color3.fromRGB(100, 255, 100))
createButton("üê¢ RESET SPEED", "Reset your speed to normal", resetSpeed, Color3.fromRGB(200, 200, 100))
createButton("ü¶ò HIGH JUMP", "Increase your jump power", highJump, Color3.fromRGB(255, 200, 100))
createButton("üìè RESET JUMP", "Reset your jump power", resetJump, Color3.fromRGB(200, 150, 100))
createButton("üëª NO CLIP", "Walk through walls", noClip, Color3.fromRGB(150, 150, 255))
createButton("üöß RE-CLIP", "Enable collision again", reClip, Color3.fromRGB(150, 200, 255))
createButton("üìã COPY IT PLAYER NAME", "Copy it player's username", function()
    local name = copyItPlayerName()
    if name then
        local notif = Instance.new("TextLabel")
        notif.Size = UDim2.new(0, 250, 0, 40)
        notif.Position = UDim2.new(0.5, -125, 0.9, 0)
        notif.BackgroundColor3 = Color3.fromRGB(50, 255, 50)
        notif.Text = "‚úÖ Copied: " .. name
        notif.TextColor3 = Color3.new(1, 1, 1)
        notif.Font = Enum.Font.GothamBold
        notif.TextSize = 14
        notif.Parent = tagHubGui
        
        local notifCorner = Instance.new("UICorner")
        notifCorner.CornerRadius = UDim.new(0, 8)
        notifCorner.Parent = notif
        
        task.wait(3)
        notif:Destroy()
    end
end, Color3.fromRGB(255, 100, 200))

-- Discord button
createButton("üì¢ JOIN DISCORD SERVER", "Get support and updates", function()
    pcall(function()
        setclipboard("https://discord.gg/9BDbbzWQKV")
    end)
    
    local notif = Instance.new("TextLabel")
    notif.Size = UDim2.new(0, 280, 0, 40)
    notif.Position = UDim2.new(0.5, -140, 0.9, 0)
    notif.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
    notif.Text = "‚úÖ Discord link copied to clipboard!"
    notif.TextColor3 = Color3.new(1, 1, 1)
    notif.Font = Enum.Font.GothamBold
    notif.TextSize = 14
    notif.Parent = tagHubGui
    
    local notifCorner = Instance.new("UICorner")
    notifCorner.CornerRadius = UDim.new(0, 8)
    notifCorner.Parent = notif
    
    task.wait(3)
    notif:Destroy()
end, Color3.fromRGB(88, 101, 242))

-- Close button
createButton("‚ùå CLOSE HUB", "Close the Tag Game Hub", function()
    tagHubGui:Destroy()
    _G.autoAvoid = false -- Stop auto avoid
end, Color3.fromRGB(100, 100, 100))

-- Auto-update scroll frame
uiListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
    scrollFrame.CanvasSize = UDim2.new(0, 0, 0, uiListLayout.AbsoluteContentSize.Y + 20)
end)

-- Make draggable
local dragging = false
local dragInput, dragStart, startPos

mainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

mainFrame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        local delta = input.Position - dragStart
        mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- Success notification
local successNotif = Instance.new("TextLabel")
successNotif.Size = UDim2.new(0, 320, 0, 50)
successNotif.Position = UDim2.new(0.5, -160, 0.1, 0)
successNotif.BackgroundColor3 = Color3.fromRGB(50, 255, 50)
successNotif.Text = "‚úÖ Tag Game Hub Loaded Successfully!"
successNotif.TextColor3 = Color3.new(1, 1, 1)
successNotif.Font = Enum.Font.GothamBold
successNotif.TextSize = 16
successNotif.Parent = tagHubGui

local successCorner = Instance.new("UICorner")
successCorner.CornerRadius = UDim.new(0, 8)
successCorner.Parent = successNotif

task.wait(3)
successNotif:Destroy()

print("Untitled Tag Game Hub loaded successfully!")
